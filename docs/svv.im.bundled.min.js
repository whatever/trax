var svv;(()=>{"use strict";var e={d:(t,r)=>{for(var i in r)e.o(r,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e){let t=e.getContext("webgl",{preserveDrawingBuffer:!0}),r=new THREE.WebGLRenderer({canvas:e,antialias:!0,preserveDrawingBuffer:!0});return r.setClearColor("#FFFFFF"),[t,r]}e.r(t),e.d(t,{App:()=>s});const i=[2052607,16646554,13631236];function n(e,t){return e+(t-e)*Math.random()}function o(){let e=Math.random(),t=parseInt(e*i.length);return i[t]}function a(){let e=new THREE.TorusGeometry(1.5,.2,10,100),t=new THREE.MeshBasicMaterial({color:o()});return new THREE.Mesh(e,t)}class s extends class{constructor({el:e}){[this.ctx,this.renderer]=r(e),this.renderer.setClearColor("#FFFFFF"),this.el=e,this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(45,e.width/e.height,10,3e3)}setup(){}update(e){throw console.error("{{update}} not implemented"),Error("no implementation")}draw(){this.renderer.render(this.scene,this.camera)}toDataURL(){return this.el.toDataURL("image/png")}}{constructor({el:e}){super(...arguments),this.el=e,[this.ctx,this.renderer]=r(e),this.renderer.setClearColor(0),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,e.width/e.height,.1,3e3),console.log("(>o_o)> damn..."),this.scene.add(new THREE.AmbientLight(14540253,.3));let t=new THREE.DirectionalLight(12004039,.2);t.position.set(0,10,0),t.target.position.set(1,0,5),this.scene.add(t),this.scene.add(t.target),this.scene.fog=new THREE.Fog(13158,10,60);let i=new THREE.PointLight(16777215,.3);i.position.set(0,10,0),this.scene.add(i),this.center=new THREE.Vector3(0,10,0),this.target=new THREE.Vector3(20,4,0),this.target=new THREE.Vector3(20,10,0),this.generateNeon(),this.generateLogo(),this.generateAlley()}generateNeon(){this.neons=[];for(let e=0;e<20;e++){let t=5*e-20,r=10,i=a();i.rotation.x=Math.PI/2,i.rotation.y=Math.PI/2,i.rotation.z=0,i.position.set(t,n(7,12),r);let o=a();o.rotation.x=Math.PI/2,o.rotation.y=Math.PI/2,o.rotation.z=0,o.position.set(t,n(9,15),-r),this.scene.add(i),this.scene.add(o)}}Plane(e){let t=new THREE.PlaneGeometry(400,20,10,10),r=new THREE.MeshBasicMaterial({color:3355443,side:THREE.DoubleSide}),i=new THREE.Mesh(t,r);return i.rotation.x=Math.PI/2,i}generateAlley(){this.alley=this.Plane({x:Math.PI/2}),this.alley.position.set(this.target.x,this.target.y-10,this.target.z),this.scene.add(this.alley),console.log("Alley generated.")}generateGround(){}generateLogo(){let e=new THREE.WebGLCubeRenderTarget(1024,{format:THREE.RGBFormat,generateMipmaps:!0,minFilter:THREE.LinearMipmapLinearFilter,encoding:THREE.sRGBEncoding}),t=new THREE.CubeCamera(1,200,e);this.logoCubeCamera=t;let r=this.scene;(new THREE.FontLoader).load("helvetiker.json",function(i){let n=new THREE.TextGeometry("TRAX",{font:i,size:1,height:1}),o=new THREE.MeshBasicMaterial({envMap:e.texture,combine:THREE.MultiplyOperation,reflectivity:1}),a=new THREE.Mesh(n,o);t.position.set(this.target.x,this.target.y,this.target.z),a.lookAt(-.2,10,.3),this.logo=a,this.logo=new THREE.Mesh(new THREE.SphereGeometry(2,200,200),o),this.logo.position.set(this.target.x,this.target.y,this.target.z);let s=new THREE.TorusGeometry(5.5,.2,10,100),h=new THREE.MeshBasicMaterial({color:16777215});this.ring=new THREE.Mesh(s,h),this.ring.position.set(this.target.x,this.target.y,this.target.z),r.add(this.logo),r.add(this.ring)}.bind(this))}generateCity(){let e=function(e){var t=document.createElement("canvas");t.width=32,t.height=64,(o=t.getContext("2d")).fillStyle="#ffffff",o.fillRect(0,0,32,64);for(var r=2;r<64;r+=2)for(var i=0;i<32;i+=2){var n=Math.floor(64*Math.random());o.fillStyle="rgb("+[n,n,n].join(",")+")",o.fillRect(i,r,2,1)}var o,a=document.createElement("canvas");a.width=512,a.height=1024,(o=a.getContext("2d")).imageSmoothingEnabled=!1,o.webkitImageSmoothingEnabled=!1,o.imageSmoothingEnabled=!1,o.drawImage(t,0,0,a.width,a.height);var s=new THREE.Texture(a);return s.anisotropy=e.capabilities.getMaxAnisotropy(),s.needsUpdate=!0,s}(this.renderer),t=new THREE.Mesh(new THREE.PlaneGeometry(10,10),new THREE.MeshBasicMaterial({color:o()}));this.scene.add(t);for(let t=0;t<=20;t++)for(let r=-10;r<=10;r++){let i=2*t,n=2*r,o=this.generateBuilding(e);o.position.set(i,0,n),this.scene.add(o)}}generateBuilding(e){let t=5+7*Math.random(),r=new THREE.BoxGeometry(1,t,1),i=new THREE.MeshLambertMaterial({map:e});return new THREE.Mesh(r,i)}move({x:e,y:t}){}update(){let e=+new Date/1e3/5;if(this.camera.position.x=this.center.x,this.camera.position.y=this.center.y,this.camera.position.z=this.center.z,this.camera.lookAt(this.target),this.logo){this.logo.rotation.x=-1*e,this.logo.rotation.y=3*e,this.logo.rotation.z=-2*e;let t=3*e;this.ring.rotation.x=-1*t,this.ring.rotation.y=3*t,this.ring.rotation.z=-2*t}}draw(){this.logoCubeCamera.update(this.renderer,this.scene),this.renderer.render(this.scene,this.camera)}}svv=t})();