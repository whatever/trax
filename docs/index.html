<!-- no one ever really dies -->
<!DOCTYPE html>
<html lang="th">
  <head>
    <title>(wip.af) maybe trax idk</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:video" content="http://whatever.rip/videos/loading_300x300.mp4" />
    <meta property="og:video:type" content="video/mp4" />
    <meta property="og:video:width" content="300" />
    <meta property="og:video:height" content="300" />

    <link href="normalize.css" rel="stylesheet" type="text/css">
    <style>

    html, body {
      font-family: sans-serif;
      padding: 0;
      margin: 0;
      box-sizing: border-box;
      background-color: rgb(255, 68, 112);
      background-color: black;
    }

    a {
      text-decoration: none;
    }

    #you-know {
      top: 0;
      left: 0;
      background-color: rgb(255, 68, 112);
      width: 100%;
      height: 100%;
    }

    #dont-touch-me {
      position: absolute;
      display: block;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    #trax {
      position: fixed;
      left: 0;
      top: 0;
      height: 100%;
      width: 100%;
    }

    #menu-click a {
      color: rgb(152, 247, 109);
      /* color: black; */
    }

    #menu-click {
      z-index: 69;
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 40px;
      color: rgb(152, 247, 109);

      border: solid 10px rgb(152, 247, 109);
      /* border: solid 10px black; */

      padding: 0.5em;
      border-radius: 30px 10px 30px 10px;
      font-style: italic;

    }

    #side-panel {
      z-index: 1;
      width: 20%;
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
      background-color: rgba(255, 255, 255, 0.4);
      display: none;
    }

    #wavvy {
      max-height: 400px;
      background-color: red;
      position: fixed;
      bottom: 1em;
      right: 1em;
    }

    #loader {
      z-index: 420;
      position: absolute;
      padding: 0;
      margin: 0;
      top: 0;
      left: 0;
      background-color: rgb(255, 68, 112);
      background-color: black;
      width: 100%;
      height: 100%;
    }
    video {
      object-fit: cover;
    }
    </style>

    <!-- what's the difference between you and me? -->
    <script src="/static/three.min.js"></script>
    <script src="/static/OBJLoader.js"></script>

    <!-- <script src="dat.gui.min.js"></script> -->
    <!-- <script src="stats.min.js"></script> -->

    <script src="/static/svv.im.bundled.min.js"></script>

  </head>
  <body>

    <!-- ok -->
    <header id="menu-click"><div><a href="menu.pdf">MENU</a></div></header>

    <div id="side-panel"></div>

    <canvas width="1500" height="1500" id="trax"></canvas>

    <!-- PIP
    <video defaultMuted loop muted autoplay playsinline id="wavvy">
      <source src="videos/wavvy.mp4">
    </video> -->

    <script>

      svv.LoadingSequence();
    var start = +new Date();

    window.addEventListener("load", function (ev) {

      var DELAY = 1000;

      var loaded = new Date() - start;
      var delay = Math.ceil(DELAY-loaded, 0);

      console.log("Delaying ", delay);

      setTimeout(function () {

        document.getElementById("loader").remove();

        var el = document.getElementById("trax");

        var app = new svv.App({el: el});

        var resizer = app.resizeFunction(el);

        window.onresize = function () {
          document.body.height = window.innerHeight;
          resizer();
        };
        window.onresize();

        (function loop () {
          app.update();
          app.draw();
          requestAnimationFrame(loop);
        }());

        el.addEventListener("mousemove", function (ev) {
          let w = el.clientWidth;
          let h = el.clientHeight;
          let x = 2 * ev.offsetX / w - 1.0;
          let y = 1.0 - 2 * ev.offsetY / h;
          app.move({"x": x, "y": y});
        });
      }, delay);
    });
    </script>
  </body>
</html>
