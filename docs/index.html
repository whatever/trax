<!DOCTYPE html>
<html>
  <head>
    <title>(wip.af) i'm not really thinking about it</title>

    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">

    <meta property="og:video" content="http://whatever.rip/videos/loading_600x600.mp4" />
    <meta property="og:video:type" content="video/mp4" />
    <meta property="og:video:width" content="600" />
    <meta property="og:video:height" content="600" />

    <style>

    html, body {
      font-family: sans-serif;
      background-color: rgb(255, 68, 112);
      background-color: white;
      padding: 0;
      margin: 0;
      height: 100vh;
      width: 100vw;
    }

    a {
      text-decoration: none;
    }

    #you-know {
      top: 0;
      left: 0;
      background-color: rgb(255, 68, 112);
      width: 100%;
      height: 100%;
    }

    #dont-touch-me {
      position: absolute;
      display: block;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    #trax {
      z-index: -1;
      position: fixed;
      left: 0;
      top: 0;
      min-width: 100%;
      min-height: 100%;
    }

    #menu-click a {
      color: rgb(152, 247, 109);
      color: black;
    }

    #menu-click {
      z-index: 1;
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 40px;
      color: rgb(152, 247, 109);

      border: solid 10px rgb(152, 247, 109);
      border: solid 10px black;

      padding: 0.5em;
      border-radius: 30px 10px 30px 10px;
      font-style: italic;

    }

    #side-panel {
      width: 20%;
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
      background-color: rgba(255, 255, 255, 0.4);
    }

    #wavvy {
      max-height: 400px;
      background-color: red;
      position: fixed;
      bottom: 1em;
      right: 1em;
    }

    #loader {
      z-index: 2;
      position: absolute;
      padding: 0;
      margin: 0;
      top: 0;
      left: 0;
      background-color: rgb(255, 68, 112);
      width: 100%;
      height: 100%;
    }
    video {
      object-fit: cover;
    }
    </style>

    <!-- what's the difference between you and me? -->
    <script src="three.min.js"></script>
    <script src="OBJLoader.js"></script>

    <script src="dat.gui.min.js"></script>
    <script src="stats.min.js"></script>
    <script src="svv.im.bundled.min.js"></script>

  </head>
  <body>

    <video defaultMuted muted loop autoplay id="loader">
      <source src="videos/loading_300x300.mp4">
    </video>

    <!-- ok -->
    <header id="menu-click"><div><a href="menu.pdf">MENU</a></div></header>
    <div id="side-panel"></div>
    <canvas width="1500" height="1500" id="trax"></canvas>

    <video defaultMuted muted loop autoplay id="wavvy">
      <source src="videos/wavvy.mp4">
    </video>

    <script>
    var start = +new Date();

    window.addEventListener("load", function (ev) {

      var loaded = new Date() - start;
      var delay = Math.ceil(6000-loaded, 0);

      console.log("Delaying ", delay);

      setTimeout(function () {

        document.getElementById("loader").remove();

        var el = document.getElementById("trax");

        var app = new svv.App({el: el});

        window.addEventListener("resize", app.resizeFunction(el));

        (function loop () {
          app.update();
          app.draw();
          requestAnimationFrame(loop);
        }());

        el.addEventListener("mousemove", function (ev) {
          let w = el.clientWidth;
          let h = el.clientHeight;
          let x = 2 * ev.offsetX / w - 1.0;
          let y = 1.0 - 2 * ev.offsetY / h;
          app.move({"x": x, "y": y});
        });
      }, delay);
    });
    </script>
  </body>
</html>
